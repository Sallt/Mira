#:import CreateContact libs.uix.createcontact.CreateContact
#:import CallContact libs.uix.callcontact.CallContact
#:import EmptyScreen libs.uix.emptyscreen.EmptyScreen
#:import Toolbar kivymd.toolbar.Toolbar
#:import MDTabbedPanel kivymd.uix.tabs.MDTabbedPanel
#:import MDTab kivymd.uix.tabs.MDTab

###############################################################################
#
#                              СТАРТОВЫЙ ЭКРАН
#
###############################################################################
<StartScreen>:
    id: root.manager
    Screen:
        name: 'root_screen'
        BoxLayout:
            #canvas:
            #    Rectangle:
            #        pos: self.pos
            #        size: self.size
            #        source: 'Data/Img/background.jpeg'
            orientation: 'vertical'
            ####################################################################
            #
            #                            ACTION BAR
            #
            ####################################################################
            Toolbar:
                #canvas.before:
                #    Rectangle:
                #        pos: self.pos
                #        size: self.size
                #        source: 'Data/Img/background.jpg'

                id: home_bar
                #background_color: app.data.alpha
                background_color: app.theme_cls.primary_color
                use_overflow: True
                left_action_items: [['home', lambda x: app.callback(x), "на основную"]]
                right_action_items: [['menu', lambda x: app.callback(x), "назад"]]
            ####################################################################
            #
            #                           TABBED PANEL
            #
            ####################################################################
            MDBottomNavigation:
                id: tabs
                panel_color: get_color_from_hex("#4bb760")
                selected_color_background: get_color_from_hex("#3b934c")
                text_color_normal: 0, 0, 0, 0.1
                text_color_active: 0, 0, 0, 1
                #tab_display_mode: 'text'
                #tab_color: app.data.alpha
                #tab_text_color: app.data.tab_text_color
                #tab_indicator_color: app.data.tab_indicator_color

                MDBottomNavigationItem:
                    name: 'classes'
                    icon: 'account-group'
                    text: app.data.string_lang_classes
                    on_tab_press: app.on_tab_press(self.name)
                    ScreenManager:
                        id: screen_manager_tab_classes
                        Screen:
                            name: 'empty_class_list'
                            EmptyScreen:
                                icon: 'account-group-outline'
                                text: app.data.string_lang_add_classes
                                callback: app.show_form_create_class
                                disabled: False
                        Screen:
                            name: 'create_class'
                            CreateClass:
                MDBottomNavigationItem:
                    name: 'q_sets'
                    icon: 'head-question-outline'
                    text: app.data.string_lang_sets
                    on_tab_press: app.on_tab_press(self.name)
                    ScreenManager:
                        id: screen_manager_tab_sets
                        Screen:
                            name: 'empty_sets_list'
                            EmptyScreen:
                                icon: 'puzzle-remove-outline'
                                text: app.data.string_lang_add_sets
                                callback: app.show_form_create_set
                                disabled: False
                        Screen:
                            name: 'create_set'
                            CreateSet:
                MDBottomNavigationItem:
                    name: 'reports'
                    icon: 'file-chart-outline'
                    text: app.data.string_lang_reports
                    on_tab_press: app.on_tab_press(self.name)
                    ScreenManager:
                        id: screen_manager_tab_reports
                        Screen:
                            name: 'empty_reports_list'
                            EmptyScreen:
                                icon: 'clipboard-search-outline'
                                text: app.data.string_lang_not_reports
                                callback: lambda: app.create_group()
                                disabled: False
                MDBottomNavigationItem:
                    name: 'scoresheet'
                    icon: 'book-education-outline'
                    text: app.data.string_lang_scores
                    on_tab_press: app.on_tab_press(self.name)
                    ScreenManager:
                        id: screen_manager_tab_scores
                        Screen:
                            name: 'empty_scores_list'
                            EmptyScreen:
                                icon: 'book-search-outline'
                                text: app.data.string_lang_not_scores
                                callback: lambda: app.create_group()
                                disabled: False
    Screen:
        name: 'startquiz'
        StartQuiz:
